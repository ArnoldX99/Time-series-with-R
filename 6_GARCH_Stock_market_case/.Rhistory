stock <- read_table2(
"D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/601788.xlsx",
col_types=cols(
.default=col_double(),
date=col_date("%Y%m%d")
))
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
stock <- read_excel(
"D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/601788.xlsx",
col_types=cols(
.default=col_double(),
date=col_date("%Y%m%d")
))
stock <- read(
"D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/601788.xlsx",
col_types=cols(
.default=col_double(),
date=col_date("%Y%m%d")
))
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
stock <- read.table(
"D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/601788.xlsx",
col_types=cols(
.default=col_double(),
date=col_date("%Y%m%d")
))
stock <- read.table("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/601788.xlsx")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
View(stock)
View(stock)
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
stock <- read.csv("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/601788.xlsx")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
View(stock)
View(stock)
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
View(stock)
View(stock)
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
View(stock)
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
View(stock)
knitr::kable(stock[1:20,])
print(stock)
ts.stock <- ts(stock, frequency=30)
View(ts.stock)
View(ts.stock)
View(stock)
stock <- www[8]
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
View(stock)
ts.stock
plot(ts.stock, ylab="log return", main="Intel Stock Price Monthly Log Return")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
#ä½œå¯¹æ•°æ”¶ç›Šç‡åºåˆ—çš„ ACF å›¾ï¼š
acf(ts.stock, main="ACF of log return")
#L jungç™½å™ªå£°æ£€éªŒ
Box.test(ts.intel, lag=12, type="Ljung")
#L jungç™½å™ªå£°æ£€éªŒ
Box.test(ts.stock, lag=30, type="Ljung")
#å¯ä»¥æ£€éªŒ {ğ‘Ÿ_ğ‘¡} åºåˆ—çš„å‡å€¼æ˜¯å¦ç­‰äºé›¶ï¼š
t.test(c(ts.intel))
#å¯ä»¥æ£€éªŒ {ğ‘Ÿ_ğ‘¡} åºåˆ—çš„å‡å€¼æ˜¯å¦ç­‰äºé›¶ï¼š
t.test(c(ts.stock))
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
#ä½œå¯¹æ•°æ”¶ç›Šç‡çš„æ—¶é—´åºåˆ—å›¾ï¼š
plot(ts.stock, ylab="log return", main="å…‰å¤§è¯åˆ¸ Stock Price Monthly Log Return")
#è€ƒè™‘ {|ğ‘Ÿ_ğ‘¡|} åºåˆ—ã€‚ä½œå…¶ ACFï¼š
acf(abs(ts.stock), main="å…‰å¤§è¯åˆ¸ å¯¹æ•°æ”¶ç›Šç‡ç»å¯¹å€¼çš„ ACF ä¼°è®¡")
#ä½œ Ljung-Box ç™½å™ªå£°æ£€éªŒ
Box.test(abs(ts.intel), lag=30, type="Ljung")
#ä½œ Ljung-Box ç™½å™ªå£°æ£€éªŒ
Box.test(abs(ts.stock), lag=30, type="Ljung")
#ä½œ {ğ‘Ÿ_t^2} çš„ ACF:
acf(ts.stock^2, main="Intel å¯¹æ•°æ”¶ç›Šç‡å¹³æ–¹çš„ ACF ä¼°è®¡")
#å¯¹ {ğ‘Ÿ_t^2} åºåˆ—ä½œ Ljung-Box ç™½å™ªå£°æ£€éªŒï¼š
Box.test(ts.stock^2, lag=30, type="Ljung")
#ä»¤ ğ‘ğ‘¡ = ğ‘Ÿğ‘¡ âˆ’ Ì„ğ‘Ÿã€‚å…ˆå¯¹{ağ‘¡^2 } ä½œ Ljung-Box ç™½å™ªå£°æ£€éªŒï¼š
Box.test((ts.intel - mean(ts.stock))^2,lag=30, type="Ljung")
#ä»¤ ğ‘ğ‘¡ = ğ‘Ÿğ‘¡ âˆ’ Ì„ğ‘Ÿã€‚å…ˆå¯¹{ağ‘¡^2 } ä½œ Ljung-Box ç™½å™ªå£°æ£€éªŒï¼š
Box.test((ts.stock - mean(ts.stock))^2,lag=30, type="Ljung")
#ç”¨ Engle çš„æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•æ£€éªŒ ARCH æ•ˆåº”ï¼š
archTest(ts.stock - mean(ts.stock), m=30)
install.packages(tseries)
install.packages(fSeries)
install.packages(car)
install.packages(rugarch)
install.packages(ts)
install.packages("tseries")
install.packages("fSeries")
install.packages(car)
install.packages("car")
> install.packages("rugarch")
install.packages("rugarch")
#ç”¨ Engle çš„æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•æ£€éªŒ ARCH æ•ˆåº”ï¼š
archTest(ts.stock - mean(ts.stock), m=30)
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
library(carData)
#è¯»å–æ•°æ®
www <- read.table("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/601788.txt")
stock <- www[8]
#è½¬åŒ–ä¸ºæ—¶é—´åºåˆ—
ts.stock <- ts(stock, frequency=30)
#ä½œå¯¹æ•°æ”¶ç›Šç‡çš„æ—¶é—´åºåˆ—å›¾ï¼š
plot(ts.stock, ylab="log return", main="å…‰å¤§è¯åˆ¸ Stock Price Monthly Log Return")
#ä½œå¯¹æ•°æ”¶ç›Šç‡åºåˆ—çš„ ACF å›¾ï¼š
acf(ts.stock, main="ACF of log return")
#L jungç™½å™ªå£°æ£€éªŒ
Box.test(ts.stock, lag=30, type="Ljung")
#æ£€éªŒ {ğ‘Ÿ_ğ‘¡} åºåˆ—çš„å‡å€¼æ˜¯å¦ç­‰äºé›¶ï¼š
t.test(c(ts.stock))
#è€ƒè™‘ {|ğ‘Ÿ_ğ‘¡|} åºåˆ—ã€‚ä½œå…¶ ACFï¼š
acf(abs(ts.stock), main="å…‰å¤§è¯åˆ¸ å¯¹æ•°æ”¶ç›Šç‡ç»å¯¹å€¼çš„ ACF ä¼°è®¡")
#ä½œ Ljung-Box ç™½å™ªå£°æ£€éªŒ
Box.test(abs(ts.stock), lag=30, type="Ljung")
#ä½œ {ğ‘Ÿ_t^2} çš„ ACF:
acf(ts.stock^2, main="Intel å¯¹æ•°æ”¶ç›Šç‡å¹³æ–¹çš„ ACF ä¼°è®¡")
#å¯¹ {ğ‘Ÿ_t^2} åºåˆ—ä½œ Ljung-Box ç™½å™ªå£°æ£€éªŒï¼š
Box.test(ts.stock^2, lag=30, type="Ljung")
#ä»¤ ğ‘ğ‘¡ = ğ‘Ÿğ‘¡ âˆ’ Ì„ğ‘Ÿã€‚å…ˆå¯¹{ağ‘¡^2 } ä½œ Ljung-Box ç™½å™ªå£°æ£€éªŒï¼š
Box.test((ts.stock - mean(ts.stock))^2,lag=30, type="Ljung")
#ç”¨ Engle çš„æ‹‰æ ¼æœ—æ—¥ä¹˜å­æ³•æ£€éªŒ ARCH æ•ˆåº”ï¼š
archTest(ts.stock - mean(ts.stock), m=30)
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
mod1 <- garchFit(~ 1 + garch(1,1), data=ts.stock, trace=FALSE)
View(mod1)
summary(mod1)
abline(h=sd(ts.stock), col="green")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
##plot(mod1, which=9)
resi <- residuals(mod1, standardize=TRUE)
plot(ts(resi, start=start(ts.intel), frequency=frequency(ts.intel)),
xlab=" å¹´", ylab=" æ ‡å‡†åŒ–æ®‹å·®")
plot(ts(resi, start=start(ts.stock), frequency=frequency(ts.intel)),
xlab=" å¹´", ylab=" æ ‡å‡†åŒ–æ®‹å·®")
plot(ts(resi, start=start(ts.stock), frequency=frequency(ts.stock)),
xlab=" å¹´", ylab=" æ ‡å‡†åŒ–æ®‹å·®")
unname
unname(sqrt(tmpx["omega"]/(1 - tmpx["alpha1"] - tmpx["beta1"])))
print(unname(sqrt(tmpx["omega"]/(1 - tmpx["alpha1"] - tmpx["beta1"]))))
##plot(mod1, which=9)
resi <- residuals(mod1, standardize=TRUE)
plot(ts(resi, start=start(ts.stock), frequency=frequency(ts.stock)),
xlab=" å¹´", ylab=" æ ‡å‡†åŒ–æ®‹å·®")
#æ ‡å‡†åŒ–æ®‹å·®çš„æ—¶é—´åºåˆ—å›¾ï¼š
resi <- residuals(mod1, standardize=TRUE)
plot(ts(resi, start=start(ts.stock), frequency=frequency(ts.stock)),
xlab=" mins", ylab=" æ ‡å‡†åŒ–æ®‹å·®")
# a_tä¸a_t^2çš„ACF
resi <- residuals(mod1, standardize=TRUE)
acf(resi, lag.max=30, main="")
resi <- residuals(mod1, standardize=TRUE)
acf(resi^2, lag.max=30, main="")
intel
plot(x.stock, c(ts.stock), type="l",
xlab=" 30mins", ylab=" å¯¹æ•°æ”¶ç›Šç‡")
lines(x.stock, c(lb.stock), col="red")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
#L jungç™½å™ªå£°æ£€éªŒ
Box.test(ts.stock, lag=30, type="Ljung")
#æ£€éªŒ {ğ‘Ÿ_ğ‘¡} åºåˆ—çš„å‡å€¼æ˜¯å¦ç­‰äºé›¶ï¼š
t.test(c(ts.stock))
acf(abs(ts.stock), main="å…‰å¤§è¯åˆ¸ å¯¹æ•°æ”¶ç›Šç‡ç»å¯¹å€¼çš„ ACF ä¼°è®¡")
acf(abs(ts.stock), main="å…‰å¤§è¯åˆ¸ å¯¹æ•°æ”¶ç›Šç‡ç»å¯¹å€¼çš„ ACF ä¼°è®¡")
acf(abs(ts.stock), main="å…‰å¤§è¯åˆ¸ å¯¹æ•°æ”¶ç›Šç‡ç»å¯¹å€¼çš„ ACF ä¼°è®¡")
acf(abs(ts.stock), main="å…‰å¤§è¯åˆ¸ å¯¹æ•°æ”¶ç›Šç‡ç»å¯¹å€¼çš„ ACF ä¼°è®¡")
acf(abs(ts.stock), main="å…‰å¤§è¯åˆ¸ å¯¹æ•°æ”¶ç›Šç‡ç»å¯¹å€¼çš„ ACF ä¼°è®¡")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
#ä½œ {ğ‘Ÿ_t^2} çš„ ACF:
acf(ts.stock^2, main="Intel å¯¹æ•°æ”¶ç›Šç‡å¹³æ–¹çš„ ACF ä¼°è®¡")
#å¯¹ {ğ‘Ÿ_t^2} åºåˆ—ä½œ Ljung-Box ç™½å™ªå£°æ£€éªŒï¼š
Box.test(ts.stock^2, lag=30, type="Ljung")
Box.test(abs(ts.stock), lag=30, type="Ljung")
#ä»¤ ğ‘ğ‘¡ = ğ‘Ÿğ‘¡ âˆ’ Ì„ğ‘Ÿã€‚å…ˆå¯¹{ağ‘¡^2 } ä½œ Ljung-Box ç™½å™ªå£°æ£€éªŒï¼š
Box.test((ts.stock - mean(ts.stock))^2,lag=30, type="Ljung")
#é‡‡ç”¨æ­£æ€æ¡ä»¶åˆ†å¸ƒå»ºç«‹ GARCH(1,1) æ¨¡å‹ï¼š
library(fGarch, quietly = TRUE)
mod1 <- garchFit(~ 1 + garch(1,1), data=ts.stock, trace=FALSE)
summary(mod1)
# æ‹Ÿåˆçš„æ³¢åŠ¨ç‡å›¾å½¢ï¼š
##plot(mod1, which=2)
vola <- volatility(mod1)
plot(ts(vola, start=start(ts.stock), frequency=frequency(ts.stock)),
xlab=" åˆ†é’Ÿ", ylab=" æ³¢åŠ¨ç‡")
abline(h=sd(ts.stock), col="green")
#æ ‡å‡†åŒ–æ®‹å·®çš„æ—¶é—´åºåˆ—å›¾ï¼š
resi <- residuals(mod1, standardize=TRUE)
plot(ts(resi, start=start(ts.stock), frequency=frequency(ts.stock)),
xlab=" mins", ylab=" æ ‡å‡†åŒ–æ®‹å·®")
# a_tä¸a_t^2çš„ACF
resi <- residuals(mod1, standardize=TRUE)
acf(resi, lag.max=30, main="")
resi <- residuals(mod1, standardize=TRUE)
acf(resi^2, lag.max=30, main="")
#95%é¢„æµ‹åŒºé—´
vola <- volatility(mod1)
hatmu <- coef(mod1)["mu"]
lb.stock<- hatmu - 2*vola
ub.stock <- hatmu + 2*vola
ylim <- range(c(ts.stock, lb.stock, ub.stock))
x.stock <- c(time(ts.stock))
plot(x.stock, c(ts.stock), type="l",
xlab=" 30mins", ylab=" å¯¹æ•°æ”¶ç›Šç‡")
lines(x.stock, c(lb.stock), col="red")
lines(x.stock, c(ub.stock), col="red")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
#å¯¹ {ğ‘Ÿ_t^2} åºåˆ—ä½œ Ljung-Box ç™½å™ªå£°æ£€éªŒï¼š
Box.test(ts.stock^2, lag=30, type="Ljung")
#ä»¤ ğ‘ğ‘¡ = ğ‘Ÿğ‘¡ âˆ’ Ì„ğ‘Ÿ å…ˆå¯¹{ağ‘¡^2 } ä½œ Ljung-Box ç™½å™ªå£°æ£€éªŒï¼š
Box.test((ts.stock - mean(ts.stock))^2,lag=30, type="Ljung")
#é‡‡ç”¨æ­£æ€æ¡ä»¶åˆ†å¸ƒå»ºç«‹ GARCH(1,1) æ¨¡å‹ï¼š
library(fGarch, quietly = TRUE)
mod1 <- garchFit(~ 1 + garch(1,1), data=ts.stock, trace=FALSE)
summary(mod1)
# æ‹Ÿåˆçš„æ³¢åŠ¨ç‡å›¾å½¢ï¼š
##plot(mod1, which=2)
vola <- volatility(mod1)
plot(ts(vola, start=start(ts.stock), frequency=frequency(ts.stock)),
xlab=" åˆ†é’Ÿ", ylab=" æ³¢åŠ¨ç‡")
abline(h=sd(ts.stock), col="green")
#æ ‡å‡†åŒ–æ®‹å·®çš„æ—¶é—´åºåˆ—å›¾ï¼š
resi <- residuals(mod1, standardize=TRUE)
plot(ts(resi, start=start(ts.stock), frequency=frequency(ts.stock)),
xlab=" mins", ylab=" æ ‡å‡†åŒ–æ®‹å·®")
# a_tä¸a_t^2çš„ACF
resi <- residuals(mod1, standardize=TRUE)
acf(resi, lag.max=30, main="")
resi <- residuals(mod1, standardize=TRUE)
acf(resi^2, lag.max=30, main="")
#95%é¢„æµ‹åŒºé—´
vola <- volatility(mod1)
hatmu <- coef(mod1)["mu"]
lb.stock<- hatmu - 2*vola
ub.stock <- hatmu + 2*vola
ylim <- range(c(ts.stock, lb.stock, ub.stock))
x.stock <- c(time(ts.stock))
plot(x.stock, c(ts.stock), type="l",
xlab=" 30mins", ylab=" å¯¹æ•°æ”¶ç›Šç‡")
lines(x.stock, c(lb.stock), col="red")
lines(x.stock, c(ub.stock), col="red")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
#ä½œ {ğ‘Ÿ_t^2} çš„ ACF:
acf(ts.stock^2, main="å…‰å¤§è¯åˆ¸å¯¹æ•°æ”¶ç›Šç‡å¹³æ–¹çš„ ACF ä¼°è®¡")
#å¯¹ {ğ‘Ÿ_t^2} åºåˆ—ä½œ Ljung-Box ç™½å™ªå£°æ£€éªŒï¼š
Box.test(ts.stock^2, lag=30, type="Ljung")
#ä»¤ ğ‘ğ‘¡ = ğ‘Ÿğ‘¡ âˆ’ Ì„ğ‘Ÿ å…ˆå¯¹{ağ‘¡^2 } ä½œ Ljung-Box ç™½å™ªå£°æ£€éªŒï¼š
Box.test((ts.stock - mean(ts.stock))^2,lag=30, type="Ljung")
Box.test(ts.stock^2, lag=30, type="Ljung")
Box.test((ts.stock - mean(ts.stock))^2,lag=30, type="Ljung")
archTest(ts.intel - mean(ts.intel), m=12)
archtest(ts.intel - mean(ts.intel), m=12)
arch_Test(ts.intel - mean(ts.intel), m=12)
archTest(ts.stock - mean(ts.intel), m=12)
rosTest(ts.intel - mean(ts.intel), m=12)
install.packages("finTs")
archTest(ts.intel - mean(ts.intel), m=12)
install.packages("FinTS")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
archTest(ts.intel - mean(ts.intel), m=12)
archTest(ts.intel - mean(ts.intel), m=12)
ArchTest(ts.intel - mean(ts.intel), m=12)
?archtest
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
# Archæ£€éªŒ
ArchTest(ts.intel - mean(ts.stock), m=30)
#é‡‡ç”¨æ­£æ€æ¡ä»¶åˆ†å¸ƒå»ºç«‹ GARCH(1,1) æ¨¡å‹ï¼š
library(fGarch, quietly = TRUE)
mod1 <- garchFit(~ 1 + garch(1,1), data=ts.stock, trace=FALSE)
summary(mod1)
# æ‹Ÿåˆçš„æ³¢åŠ¨ç‡å›¾å½¢ï¼š
##plot(mod1, which=2)
vola <- volatility(mod1)
plot(ts(vola, start=start(ts.stock), frequency=frequency(ts.stock)),
xlab=" åˆ†é’Ÿ", ylab=" æ³¢åŠ¨ç‡")
abline(h=sd(ts.stock), col="green")
#æ ‡å‡†åŒ–æ®‹å·®çš„æ—¶é—´åºåˆ—å›¾ï¼š
resi <- residuals(mod1, standardize=TRUE)
plot(ts(resi, start=start(ts.stock), frequency=frequency(ts.stock)),
xlab=" mins", ylab=" æ ‡å‡†åŒ–æ®‹å·®")
# a_tä¸a_t^2çš„ACF
resi <- residuals(mod1, standardize=TRUE)
acf(resi, lag.max=30, main="")
resi <- residuals(mod1, standardize=TRUE)
acf(resi^2, lag.max=30, main="")
#95%é¢„æµ‹åŒºé—´
vola <- volatility(mod1)
hatmu <- coef(mod1)["mu"]
lb.stock<- hatmu - 2*vola
ub.stock <- hatmu + 2*vola
ylim <- range(c(ts.stock, lb.stock, ub.stock))
x.stock <- c(time(ts.stock))
plot(x.stock, c(ts.stock), type="l",
xlab=" 30mins", ylab=" å¯¹æ•°æ”¶ç›Šç‡")
lines(x.stock, c(lb.stock), col="red")
lines(x.stock, c(ub.stock), col="red")
ArchTest(ts.intel - mean(ts.stock), m=30)
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
source("D:/æ•™å­¦èµ„æ–™/ç ”ç©¶ç”Ÿ/æ—¶é—´åºåˆ—/Chapter6/garch.r")
ArchTest(ts.stock - mean(ts.stock), m=30)
summary(mod1)
